<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<script>
  const swiperProggrams = new Swiper(".swiper-programs", {
    centeredSlides: true,
    slidesPerView: 1,
    createElements: true,
    spaceBetween: 50,
    speed: 500,
    autoplay: {
      delay: 3000,
      disableOnInteraction: false,
    },
    pagination: {
      el: "#pagination-programs",
      type: "bullets",
    },
  });

  const swiperTeam = new Swiper(".swiper-team", {
    centeredSlides: true,
    slidesPerView: 1,
    createElements: true,
    spaceBetween: 50,
    speed: 500,
    pagination: {
      el: "#pagination-team",
      type: "bullets",
    },
  });

  const DEFAULT_TOP_TITLE_TEXT = "Предварительная запись:";

  const programButtonCta = document.getElementById("programButton");

  const TABLE_TITLE_IDS = {
    base: "titleBaseText",
    treatment: "titleTreatmentText",
    visits: "titleVisitsText",
    visitingTimes: "titleVisitingTimes",
    durability: "durabilityText",
    periodicity: "periodicityText",
  };

  const programs = [
    {
      id: "program1",
      mobileId: "programMobile1",
      formTitle: "«Удаление зубов мудрости — Красиво»",
      titleText: "Удаление зубов мудрости — «Красиво»",
      price: "37 160",
      tableData: [
        {
          tableTitleId: "base",
          tableTextId: "titleBaseText",
          tableText: "По показаниям",
        },
        {
          tableTitleId: "treatment",
          tableTextId: "titleTreatmentText",
          tableText: "4 зуба",
        },
        {
          tableTitleId: "visits",
          tableTextId: "titleVisitsText",
          tableText: "2-4",
        },
        {
          tableTitleId: "visitingTimes",
          tableTextId: "titleVisitingTimes",
          tableText: "1 месяц",
        },
      ],
      services: [
        "Консультация",
        "Компьютерная томография",
        "Профессиональная гигиена полости рта",
        "100% анестезия",
        "Поэтапное удаление всех зубов мудрости",
        "Контрольный осмотр и снятие швов",
        "Набор для быстрого восстановления после хирургических процедур",
      ],
      result:
        "Максимальное комфортное удаление всех зубов мудрости под 6-кратным оптическим увеличением с усиленным пучком света, для минимального травмирования окружающих тканей, что способствует лучшему заживлению и восстановлению кости и мягких тканей в зоне удаления",
      forWhom:
        "Желающим провести удаление всех зубов мудрости с минимальным периодом восстановления",
    },
    {
      id: "program2",
      mobileId: "programMobile2",
      formTitle: "«Одномоментная имплантация»",
      titleText: "Одномоментная имплантация",
      price: "93 730",
      tableData: [
        {
          tableTitleId: "base",
          tableTextId: "titleBaseText",
          tableText: "По показаниям",
        },
        {
          tableTitleId: "treatment",
          tableTextId: "titleTreatmentText",
          tableText: "1 зуб",
        },
        {
          tableTitleId: "visits",
          tableTextId: "titleVisitsText",
          tableText: "5 визитов",
        },
        {
          tableTitleId: "visitingTimes",
          tableTextId: "titleVisitingTimes",
          tableText: "4-5 месяца",
        },
      ],
      services: [
        "Консультация хирурга",
        "Компьютерная томография",
        "Профессиональная гигиена полости рта",
        "100% анестезия",
        "Удаление разрушенного зуба",
        "Установка имплантата AnyRidge",
        "Контрольное КТ",
        "Набор для быстрого восстановления и домашнего ухода после хирургических процедур",
        "Установка абатмента и керамической коронки",
        "Гарантия",
      ],
      result:
        "Удаление разрушенного зуба и установка имплантата с коронкой в минимальное количество приемов",
      forWhom:
        "Тем, кто хочет максимально комфортно за минимальное количество приемов избавиться от разрушенного зуба и установить имплантат с керамической коронкой",
    },
    {
      id: "program3",
      mobileId: "programMobile3",
      formTitle: "«Сохранение зуба от удаления»",
      titleText: "Сохранение зуба от удаления",
      price: "86 410",
      tableData: [
        {
          tableTitleId: "treatment",
          tableTextId: "titleTreatmentText",
          tableText: "1 зуб / 3 корня / 4 канала",
        },
        {
          tableTitleId: "visits",
          tableTextId: "titleVisitsText",
          tableText: "до 8 визитов",
        },
        {
          tableTitleId: "visitingTimes",
          tableTextId: "titleVisitingTimes",
          tableText: "до 1 года",
        },
      ],
      services: [
        "Консультация терапевта",
        "Компьютерная томография",
        "Профессиональная гигиена полости рта",
        "100% анестезия",
        "Распломбировка, чистка и пломбирование каналов любой проходимости под микроскопом",
        "Контрольные рентгеновские снимки",
        "Замена лекарств в каналах при большом разрушении костной ткани в очаге воспаления (индивидуально)",
        "Восстановление зуба пломбой на стекловолоконном штифте",
        "Восстановление зуба коронкой",
      ],
      result:
        "Сохранение зуба. Экономия времени и денег на имплантацию с последующим протезированием. Стабильность и долговечность опоры зуба",
      forWhom: "Тем, кто ценит СВОЮ здоровую и красивую Улыбку",
    },
    {
      id: "program4",
      mobileId: "programMobile4",
      formTitle: "«Эстетика десны»",
      titleText: "Эстетика десны",
      price: "56 200",
      tableData: [
        {
          tableTitleId: "base",
          tableTextId: "titleBaseText",
          tableText: "По показаниям",
        },
        {
          tableTitleId: "treatment",
          tableTextId: "titleTreatmentText",
          tableText: "Очаг рецессии десны в области 6 зубов",
        },
        {
          tableTitleId: "visits",
          tableTextId: "titleVisitsText",
          tableText: "2 визита",
        },
      ],
      services: [
        "Консультация терапевта",
        "Компьютерная томография",
        "Профессиональная гигиена полости рта",
        "100% анестезия",
        "Хирургическое перемещение десны",
        "Контрольный осмотр и снятие швов",
        "Набор для быстрого восстановления и домашнего ухода после хирургических процедур",
      ],
      result:
        "Восстановление эстетики десны. Укрепление зуба в кости. Снижение чувствительности зубов на раздражители",
      forWhom:
        "Пациентам с оголением корней зубов в зоне улыбки, с повышенной чувствительностью, страдающим от подвижности зубов, неприятного запаха и больших зубных отложений",
    },
    {
      id: "program5",
      mobileId: "programMobile5",
      formTitle: "«Эстетика улыбки (виниры)»",
      titleText: "Эстетика улыбки (виниры)",
      price: "240 420",
      tableData: [
        {
          tableTitleId: "treatment",
          tableTextId: "titleTreatmentText",
          tableText: "от 6 зубов",
        },
        {
          tableTitleId: "visits",
          tableTextId: "titleVisitsText",
          tableText: "до 6",
        },
        {
          tableTitleId: "visitingTimes",
          tableTextId: "titleVisitingTimes",
          tableText: "до 1 месяца",
        },
        {
          tableTitleId: "durability",
          tableTextId: "durabilityText",
          tableText: "до 15 лет",
        },
      ],
      services: [
        "Консультация — осмотр с оптическим увеличением, фото протокол ситуации в полости рта и портретные фотографии",
        "Компьютерная томография",
        "Профессиональная гигиена полости рта",
        "Создания дизайн-проекта виниров и компьютерного моделирования новой улыбки",
        "Презентация компьютерного дизайн-проекта улыбки",
        "Примерка восковой модели будущих виниров в полости рта",
        "Фото протокол для оценки новой улыбки",
        "100% анестезия",
        "Фиксация временных виниров",
        "Фиксация постоянных виниров",
        "Гарантия",
      ],
      result: "Эстетическое преображение улыбки",
      forWhom:
        "Тем, кто имеет значительные дефекты улыбки, недоволен формой своих зубов, их цветом или улыбкой в целом",
    },
  ];

  const programItems = [
    {
      id: "pro",
      title: "«Программа PRO ПРОФИЛАКТИКА»",
    },
  ];

  function changeContentForm(title) {
    const formTitle = document.getElementById("formTitle");
    formTitle.textContent = `${DEFAULT_TOP_TITLE_TEXT} ${title}`;

    const informationInput = document.getElementById("information");
    if (informationInput) {
      informationInput.value = title;
    }
  }

  function changeProgramContent(program) {
    const programTitle = document.getElementById("programTitle");
    const programPrice = document.getElementById("programPrice");
    const programList = document.getElementById("programList");
    const forWhom = document.getElementById("forWhom");
    const result = document.getElementById("result");

    Object.entries(TABLE_TITLE_IDS).forEach(([titleId, textId]) => {
      const tableTitle = document.getElementById(titleId);
      const tableDescription = document.getElementById(textId);

      tableTitle.style.display = "none";
      tableDescription.style.display = "none";
    });

    program.tableData.forEach(({ tableTitleId, tableTextId, tableText }) => {
      const tableTitle = document.getElementById(tableTitleId);
      const tableDescription = document.getElementById(tableTextId);

      tableTitle.style.display = "block";
      tableDescription.style.display = "block";
      tableDescription.innerText = tableText;
    });

    while (!!programList.childNodes.length) {
      programList.childNodes.forEach((child) => {
        child.remove();
      });
    }

    program.services.forEach((serviceTitle) => {
      const li = document.createElement("li");

      li.innerText = serviceTitle;
      programList.appendChild(li);
    });

    programTitle.innerText = program.titleText;
    programPrice.innerText = `от ${program.price}₽`;
    forWhom.innerText = program.forWhom;
    result.innerText = program.result;
  }

  programItems.forEach((item) => {
    const program = document.getElementById(item.id);
    program.addEventListener("click", () => {
      changeContentForm(item.title);
    });
  });

  programs.forEach((program) => {
    const programBlock = document.getElementById(program.id);
    const programMobileBlock = document.getElementById(program.mobileId);

    programMobileBlock.addEventListener("click", () => {
      changeContentForm(program.formTitle);
      changeProgramContent(program);
    });

    programBlock.addEventListener("click", () => {
      changeContentForm(program.formTitle);
      changeProgramContent(program);
    });
  });

  document.querySelectorAll(".smile").forEach((button) => {
    button.addEventListener("click", (event) => {
      const buttonId = event.target.id;
      sessionStorage.setItem("tabId", buttonId);
    });
  });

  document.addEventListener("DOMContentLoaded", () => {
    const scrollGalleryBlock = document.getElementById("galleryWrapper");
    const scrollWidthGalleryBlock = scrollGalleryBlock.scrollWidth;
    const windowWidth = window.innerWidth;

    scrollGalleryBlock.scroll((scrollWidthGalleryBlock - windowWidth) / 2, 0);
  });

  programButtonCta.addEventListener("click", () => {
    const formDialog = document.getElementById("formModal");

    formDialog.style.display = "flex";
  });
</script>
