<script async defer>
  async function loadSwiperScript() {
    return new Promise((e, i) => {
      const n = document.createElement("script");
      (n.src = "https://unpkg.com/swiper@11.1.1/swiper-bundle.min.js"),
        (n.async = !0),
        (n.onload = e),
        (n.onerror = i),
        document.head.appendChild(n);
    });
  }

  function initializeSwiperSolutions() {
    new Swiper("#solutions-swiper", {
      slidesPerView: 1,
      grabCursor: !0,
      slidesPerGroup: 1,
      a11y: !1,
      spaceBetween: 100,
      autoHeight: !1,
      loop: 10,
      navigation: {
        nextEl: "#solution-swiper-nav-next",
        prevEl: "#solution-swiper-nav-prev",
      },
      pagination: {
        el: ".pagination",
        clickable: !0,
      },
    });
  }

  function initializeSwiperEnterprice() {
    new Swiper("#enterpriceSwiper", {
      slidesPerView: 1,
      grabCursor: true,
      slidesPerGroup: 1,
      spaceBetween: 30,
      autoHeight: false,
      loop: true,
      breakpoints: {
        767: {
          slidesPerView: 2,
          spaceBetween: 30,
        },
        991: {
          slidesPerView: 1,
          spaceBetween: 60,
        },
        1350: {
          slidesPerView: 2,
          spaceBetween: 60,
        },
      },
      navigation: {
        nextEl: "#enterprice-swiper-nav-next",
        prevEl: "#enterprice-swiper-nav-prev",
      },
      pagination: {
        el: ".pagination",
        clickable: true,
      },
    });
  }

  document.addEventListener("DOMContentLoaded", async function () {
    await loadSwiperScript();
    initializeSwiperSolutions();
    initializeSwiperEnterprice();
  });

  document.addEventListener("DOMContentLoaded", function () {
    const ACTIVE_CLASS = "active";
    const content = {
      integration1CBtn: "integration1CInfo",
      scoringBtn: "scoringInfo",
      asutpBtn: "asutpInfo",
      bigDataBtn: "bigDataInfo",
      taskTrackerBtn: "taskTrackerInfo",
      mesSystemBtn: "mesSystemInfo",
      crmBtn: "crmInfo",
      pdmPlmBtn: "pdmPlmInfo",
    };

    Object.keys(content).forEach(function (buttonId) {
      const button = document.getElementById(buttonId);
      const infoBlock = document.getElementById(content[buttonId]);

      button.addEventListener(
        "click",
        onClickPlanet.bind(null, button, infoBlock)
      );
    });

    function onClickPlanet(activeButton, activeInfoBlock) {
      const activeButtonChildrens = activeButton.childNodes;

      Object.keys(content).forEach(function (buttonId) {
        const button = document.getElementById(buttonId);
        const infoBlock = document.getElementById(content[buttonId]);
        const childrens = button.childNodes;

        infoBlock.classList.remove(ACTIVE_CLASS);

        childrens.forEach(function (children) {
          children.classList.remove(ACTIVE_CLASS);
        });
      });

      activeInfoBlock.classList.add(ACTIVE_CLASS);
      activeButtonChildrens.forEach(function (children) {
        children.classList.add(ACTIVE_CLASS);
      });
    }
  });

  document.addEventListener("DOMContentLoaded", () => {
    const header = document.getElementById("transparentHeader");
    const heroSection = document.getElementById("hero");
    const heroSectionHeight = heroSection.clientHeight;
    const headerHeight = header.clientHeight;

    function scrollPage() {
      const windowScroll = document.documentElement.scrollTop;
      const isHeroInvisible = windowScroll >= heroSectionHeight - headerHeight;
      const isHeroContainTransparent = header.classList.contains("transparent");

      if (isHeroInvisible && isHeroContainTransparent) {
        header.classList.remove("transparent");
        header.style.backgroundColor = "white";
      }

      if (!isHeroInvisible && !isHeroContainTransparent) {
        header.classList.add("transparent");
        header.style.backgroundColor = "rgba(0, 0, 0, 0)";
      }
    }

    document.addEventListener("scroll", scrollPage);
    scrollPage();
  });

  document.addEventListener("DOMContentLoaded", () => {
    const menuButton = document.getElementById("menuButton");

    function addScrollingBody() {
      const body = document.body;
      const isHasScrollClass = body.classList.contains("no-scroll");

      if (isHasScrollClass) {
        body.classList.remove("no-scroll");
      } else {
        body.classList.add("no-scroll");
      }
    }

    menuButton.addEventListener("click", addScrollingBody);
  });

  document.addEventListener("DOMContentLoaded", function () {
    let form = document.getElementById("header-form");
    form.addEventListener("submit", function (event) {
      ym(49180180, "reachGoal", "form_header_send", {
        form_header_send_url: window.location.href,
      });
    });
  });

  document.addEventListener("DOMContentLoaded", function () {
    let form = document.getElementById("footer-form");
    form.addEventListener("submit", function (event) {
      ym(49180180, "reachGoal", "form_footer_send", {
        form_footer_url: window.location.href,
      });
    });
  });
</script>
